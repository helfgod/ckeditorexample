/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x4a80=['delete','editing','editor','_addAnnotationToBalloon','_manuallyClosed','Esc','view','add','focus','addObserver','inline','remove','change:height','includes','attach','inlineannotations-detach-not-attached','InlineAnnotations','change:activeView','set','detach','listenTo','_balloon','isAttached','updatePosition','customView','uiType','_removeAnnotationFromBalloon','keystrokes','mousedown','stopListening','items','inlineannotations-attach-already-attached','getAnnotationView','targetRect','activeView','focusTracker','change:isFocused','destroy','afterInit','Annotations','pluginName','clear','switchTo','document','isFocused','has','update','context','showStack','requires','register','get','_addedViews','plugins','visibleView','refresh','change:selectedViews','change:visibleView'];(function(_0x871f46,_0x4a80f8){const _0x571902=function(_0x40a98c){while(--_0x40a98c){_0x871f46['push'](_0x871f46['shift']());}};_0x571902(++_0x4a80f8);}(_0x4a80,0x87));const _0x5719=function(_0x871f46,_0x4a80f8){_0x871f46=_0x871f46-0x0;let _0x571902=_0x4a80[_0x871f46];return _0x571902;};import _0x4856e6 from'@ckeditor/ckeditor5-core/src/plugin';import _0x522c82 from'../annotations/annotations';import _0x28424a from'./editorannotations';import _0x24916e from'@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon';import _0x3660ac from'@ckeditor/ckeditor5-engine/src/view/observer/mouseobserver';import _0x4c1cf0 from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import'./../../theme/annotation-inline.css';export default class A extends _0x4856e6{static get[_0x5719('0x1e')](){return[_0x522c82,_0x28424a,_0x24916e];}static get[_0x5719('0x15')](){return _0x5719('0x37');}constructor(_0x9bab1d){super(_0x9bab1d),_0x9bab1d[_0x5719('0x28')][_0x5719('0x2d')][_0x5719('0x30')](_0x3660ac),this[_0x5719('0x3')]=!0x1,this[_0x5719('0x2b')]=new Set(),this[_0x5719('0x2')]=_0x9bab1d['plugins'][_0x5719('0x20')](_0x24916e),this['_addedViews']=new Set();}['init'](){const _0x52c5e3=this[_0x5719('0x29')][_0x5719('0x22')][_0x5719('0x20')](_0x522c82);_0x52c5e3[_0x5719('0x1c')]===this[_0x5719('0x29')]&&(_0x52c5e3[_0x5719('0x1f')](_0x5719('0x31'),this),this[_0x5719('0x29')][_0x5719('0x8')][_0x5719('0x39')](_0x5719('0x2c'),(_0x54b96f,_0x14ca83)=>{const _0x220357=this[_0x5719('0x2')];this[_0x5719('0x3')]&&_0x220357[_0x5719('0x23')]&&_0x52c5e3[_0x5719('0xb')][_0x5719('0x1a')](_0x220357[_0x5719('0x23')])&&(this[_0x5719('0x2b')][_0x5719('0x2e')](_0x220357[_0x5719('0x23')]),this['_removeAnnotationFromBalloon'](_0x220357['visibleView']),_0x14ca83());}));}[_0x5719('0x13')](){const _0x4ba00e=this[_0x5719('0x29')][_0x5719('0x22')][_0x5719('0x20')](_0x522c82);_0x4ba00e[_0x5719('0x1c')]===this[_0x5719('0x29')]&&(_0x4ba00e[_0x5719('0x6')]||_0x4ba00e[_0x5719('0x17')](_0x5719('0x31')));}[_0x5719('0x12')](){this[_0x5719('0x3')]&&this[_0x5719('0x0')]();}[_0x5719('0x35')](){const _0x3bffb5=this[_0x5719('0x29')]['plugins'][_0x5719('0x20')]('Annotations'),_0x1b6293=this[_0x5719('0x2')];if(this[_0x5719('0x3')])throw new _0x4c1cf0(_0x5719('0xc'),this);if(_0x3bffb5['context']!==this[_0x5719('0x29')])throw new _0x4c1cf0('inlineannotations-not-allowed-with-context',this);this[_0x5719('0x1')](this[_0x5719('0x29')]['ui'][_0x5719('0x10')],_0x5719('0x11'),(_0x4ab20e,_0x19e9b4,_0x1aa738)=>{if(!_0x1aa738)for(const _0x1525ee of _0x3bffb5[_0x5719('0xb')])this[_0x5719('0x7')](_0x1525ee);}),this[_0x5719('0x1')](_0x3bffb5[_0x5719('0xb')],_0x5719('0x32'),(_0x325312,_0x394978)=>{this[_0x5719('0x7')](_0x394978);}),this['listenTo'](_0x3bffb5,_0x5719('0x25'),(_0x2b497a,_0x348e57,_0x3ae1b6,_0x930977)=>{for(const _0x565040 of _0x930977)_0x3ae1b6['includes'](_0x565040)||this[_0x5719('0x2b')]['delete'](_0x3bffb5[_0x5719('0xd')](_0x565040));for(const _0x4f57c6 of _0x3bffb5[_0x5719('0xb')])_0x3ae1b6[_0x5719('0x34')](_0x4f57c6[_0x5719('0x5')])||this[_0x5719('0x7')](_0x4f57c6);if(this['editor']['ui'][_0x5719('0x10')][_0x5719('0x19')])for(const _0x161acf of _0x3ae1b6)this['_addAnnotationToBalloon'](_0x3bffb5[_0x5719('0xd')](_0x161acf));}),this[_0x5719('0x1')](_0x3bffb5,_0x5719('0x38'),(_0x49ba0f,_0x10d489,_0x3ec8c2)=>{_0x3ec8c2&&this['editor']['ui'][_0x5719('0x10')]['isFocused']&&this[_0x5719('0x2a')](_0x3bffb5[_0x5719('0xd')](_0x3ec8c2),!0x0);}),this[_0x5719('0x1')](_0x1b6293,_0x5719('0x26'),(_0xec5cda,_0x270d6c,_0x40e26e,_0x4fc3b4)=>{_0x4fc3b4&&this[_0x5719('0xa')](_0x4fc3b4),_0x40e26e&&_0x3bffb5['items'][_0x5719('0x1a')](_0x40e26e)&&(this['listenTo'](_0x40e26e,_0x5719('0x33'),()=>_0x1b6293['updatePosition']()),this[_0x5719('0x1')](_0x40e26e,'Esc',()=>{this[_0x5719('0x2b')][_0x5719('0x2e')](_0x40e26e),this[_0x5719('0x7')](_0x40e26e),this[_0x5719('0x29')][_0x5719('0x28')]['view'][_0x5719('0x2f')]();}),_0x3bffb5[_0x5719('0xf')]!==_0x40e26e[_0x5719('0x5')]&&(_0x3bffb5[_0x5719('0xf')]=_0x40e26e['customView']));}),this[_0x5719('0x1')](this['editor']['ui'],_0x5719('0x1b'),()=>{_0x1b6293[_0x5719('0x23')]&&_0x3bffb5[_0x5719('0xb')][_0x5719('0x1a')](_0x1b6293[_0x5719('0x23')])&&_0x1b6293[_0x5719('0x4')]();}),this[_0x5719('0x1')](this['editor']['editing'][_0x5719('0x2d')][_0x5719('0x18')],_0x5719('0x9'),()=>{this[_0x5719('0x2b')][_0x5719('0x16')](),_0x3bffb5[_0x5719('0x24')]();}),this[_0x5719('0x3')]=!0x0;}[_0x5719('0x0')](){if(!this[_0x5719('0x3')])throw new _0x4c1cf0(_0x5719('0x36'),this);const _0x9192d5=this[_0x5719('0x29')][_0x5719('0x22')][_0x5719('0x20')](_0x5719('0x14')),_0x2c3b18=this['_balloon'];for(const _0x1c423d of this[_0x5719('0x21')])this[_0x5719('0x7')](_0x1c423d);this['stopListening'](_0x9192d5[_0x5719('0xb')]),this[_0x5719('0xa')](_0x9192d5),this['stopListening'](_0x2c3b18),this[_0x5719('0xa')](this[_0x5719('0x29')]['ui']),this[_0x5719('0xa')](this[_0x5719('0x29')]['ui'][_0x5719('0x10')]),this[_0x5719('0xa')](this['editor'][_0x5719('0x28')][_0x5719('0x2d')]['document']),this['isAttached']=!0x1;}[_0x5719('0x2a')](_0x3c75f6,_0x24371e){const _0x4d3b98=this[_0x5719('0x29')][_0x5719('0x22')][_0x5719('0x20')](_0x522c82);this['_manuallyClosed']['has'](_0x3c75f6)||(this['_addedViews']['has'](_0x3c75f6)||this[_0x5719('0x2')]['hasView'](_0x3c75f6)||(this['_addedViews'][_0x5719('0x2e')](_0x3c75f6),this[_0x5719('0x2')][_0x5719('0x2e')]({'stackId':_0x3c75f6['id'],'view':_0x3c75f6,'position':{'target':()=>_0x4d3b98['getTarget'](_0x3c75f6[_0x5719('0x5')])||_0x3c75f6[_0x5719('0xe')]}})),_0x24371e&&this[_0x5719('0x2')][_0x5719('0x1d')](_0x3c75f6['id']));}[_0x5719('0x7')](_0x2cfffe){this['_addedViews']['has'](_0x2cfffe)&&this[_0x5719('0x2')]['hasView'](_0x2cfffe)&&(this[_0x5719('0x21')][_0x5719('0x27')](_0x2cfffe),this[_0x5719('0x2')][_0x5719('0x32')](_0x2cfffe));}}