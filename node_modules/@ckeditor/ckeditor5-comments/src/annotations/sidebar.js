/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5ea4=['getSidebarItemView','element','minHeight','_lastItem','customView','change:bottom','bind','getTarget','context','last','_targetTop','plugins','_attachToContainer','_updateAnnotationTargetRect','_destroySidebarItemView','get','_annotations','requires','_sidebarItemViewToAnnotationView','content','_updateLastItem','sidebar-setcontainer-invalid-element','sidebar.preventScrollOutOfView','getIndex','change:_lastItem','define','remove','_detachFromContainer','listenTo','locale','_getItemBefore','top','_getItemAfter','_alignBeforeItem','_getMaxAvailableTop','addView','set','max','getAnnotationView','clear','_setItemTop','activeView','init','_getTargetTop','pluginName','updateHeight','_alignToTargetRect','view','change:targetRect','config','render','container','class','length','delete','height','_alignAfterItem','destroy','sidebar-attachtocontainer-missing-container','stopListening','add','change:activeView','_createSidebarView','_annotationViewToSidebarItemView','items','appendChild','_spaceBetweenItems','Annotations','setContainer','Sidebar','bottom'];(function(_0x32efdf,_0x5ea448){const _0x1497aa=function(_0x44a26f){while(--_0x44a26f){_0x32efdf['push'](_0x32efdf['shift']());}};_0x1497aa(++_0x5ea448);}(_0x5ea4,0x13a));const _0x1497=function(_0x32efdf,_0x5ea448){_0x32efdf=_0x32efdf-0x0;let _0x1497aa=_0x5ea4[_0x32efdf];return _0x1497aa;};import _0x456244 from'@ckeditor/ckeditor5-core/src/contextplugin';import _0x59318a from'./view/sidebarview';import _0x19ceda from'./view/sidebaritemview';import _0x579493 from'../annotations/annotations';import _0x16ce0b from'@ckeditor/ckeditor5-utils/src/dom/rect';import{isElement as _0x4fc453,throttle as _0x428a0b}from'lodash-es';import _0x1f39b2 from'@ckeditor/ckeditor5-utils/src/ckeditorerror';export default class x extends _0x456244{static get[_0x1497('0x3a')](){return[_0x579493];}static get[_0x1497('0xe')](){return _0x1497('0x27');}constructor(_0x1f355f){super(_0x1f355f),this[_0x1497('0x6')](_0x1497('0x2c')),this['view']=this[_0x1497('0x20')](),this[_0x1497('0x6')]('container',null),this[_0x1497('0x24')]=0x19,this[_0x1497('0x3b')]=new Map(),this[_0x1497('0x21')]=new Map(),this[_0x1497('0x31')][_0x1497('0x13')][_0x1497('0x42')]('sidebar.preventScrollOutOfView',!0x1);}[_0x1497('0xc')](){this['_annotations']=this[_0x1497('0x31')][_0x1497('0x34')]['get'](_0x1497('0x25'));const _0x573576=this['context']['config'][_0x1497('0x38')]('sidebar.container');_0x573576&&this[_0x1497('0x26')](_0x573576);}[_0x1497('0x26')](_0x1b37dd){if(!_0x4fc453(_0x1b37dd))throw new _0x1f39b2(_0x1497('0x3e'));this['container']=_0x1b37dd;}[_0x1497('0x35')]({viewClass:_0x1a70db='',spaceBetweenItems:_0x32b810=0x19}={}){const _0x3a8cfe=this[_0x1497('0x31')][_0x1497('0x34')][_0x1497('0x38')](_0x579493);if(!_0x4fc453(this[_0x1497('0x15')]))throw new _0x1f39b2(_0x1497('0x1c'),this);this[_0x1497('0x15')][_0x1497('0x23')](this['view'][_0x1497('0x2a')]),this[_0x1497('0x11')][_0x1497('0x16')]=_0x1a70db,this[_0x1497('0x24')]=_0x32b810,this[_0x1497('0x45')](_0x3a8cfe,_0x1497('0x1f'),(_0x386797,_0x1264bb,_0x49cb7a)=>{if(_0x49cb7a){const _0x2b8d3d=_0x3a8cfe[_0x1497('0x8')](_0x49cb7a),_0x178033=this[_0x1497('0x29')](_0x2b8d3d);_0x178033&&this[_0x1497('0x10')](_0x178033);}}),this[_0x1497('0x45')](_0x3a8cfe[_0x1497('0x22')],_0x1497('0x43'),(_0x5d1a93,_0x37559c,_0x1bc584)=>{this[_0x1497('0x37')](_0x37559c);const _0x42e1f4=this[_0x1497('0x39')][_0x1497('0x22')][_0x1497('0x38')](_0x1bc584-0x1),_0x4fcb2e=this['_annotations'][_0x1497('0x22')][_0x1497('0x38')](_0x1bc584);_0x42e1f4&&this[_0x1497('0x10')](this[_0x1497('0x29')](_0x42e1f4)),_0x4fcb2e&&this[_0x1497('0x10')](this[_0x1497('0x29')](_0x4fcb2e)),this['_updateLastItem']();}),_0x3a8cfe['refresh']();}[_0x1497('0x44')](){const _0x1a519b=this[_0x1497('0x39')];this['stopListening'](),this['view'][_0x1497('0x2a')][_0x1497('0x43')]();for(const _0x23e991 of _0x1a519b['items'])this[_0x1497('0x37')](_0x23e991);this[_0x1497('0x11')]['list'][_0x1497('0x9')](),this[_0x1497('0x11')][_0x1497('0x16')]='',this[_0x1497('0x2c')]=null;}[_0x1497('0x5')](_0x22c2df,_0x3d8400){_0x3d8400||(_0x3d8400=_0x22c2df);const _0x5de7f3=this['_annotations'],_0x4b049d=new _0x19ceda(this[_0x1497('0x31')]['locale']);this[_0x1497('0x3b')]['set'](_0x4b049d,_0x22c2df),this[_0x1497('0x21')][_0x1497('0x6')](_0x22c2df,_0x4b049d),_0x4b049d[_0x1497('0x3c')][_0x1497('0x1e')](_0x3d8400),this[_0x1497('0x10')](_0x4b049d),this[_0x1497('0x45')](_0x22c2df,_0x1497('0x12'),()=>{const _0x5770e3=this[_0x1497('0xd')](_0x4b049d);_0x4b049d[_0x1497('0x33')]!=_0x5770e3&&(_0x4b049d[_0x1497('0x33')]=_0x5770e3,this[_0x1497('0xa')](_0x4b049d,_0x5770e3));}),this[_0x1497('0x45')](_0x4b049d,'change:top',_0x428a0b(()=>{if(!_0x4b049d[_0x1497('0x3c')][_0x1497('0x17')])return;const _0x131e75=this['_getItemBefore'](_0x4b049d);if(!_0x131e75)return;const _0x8055fe=this[_0x1497('0x3b')][_0x1497('0x38')](_0x131e75);_0x5de7f3[_0x1497('0xb')]===_0x8055fe[_0x1497('0x2d')]?this[_0x1497('0x1a')](_0x131e75,_0x4b049d):this[_0x1497('0x3')](_0x4b049d,_0x131e75);},0xa,{'leading':!0x1})),this['listenTo'](_0x4b049d,_0x1497('0x2e'),_0x428a0b(()=>{if(!_0x4b049d[_0x1497('0x3c')][_0x1497('0x17')])return;const _0x3692a2=this[_0x1497('0x2')](_0x4b049d);if(!_0x3692a2)return;const _0x5c9ffc=this['_sidebarItemViewToAnnotationView'][_0x1497('0x38')](_0x3692a2),_0x1230e8=this[_0x1497('0x31')][_0x1497('0x13')][_0x1497('0x38')](_0x1497('0x3f'));_0x5de7f3[_0x1497('0xb')]===_0x5c9ffc[_0x1497('0x2d')]&&_0x1230e8?(this[_0x1497('0x3')](_0x3692a2,_0x4b049d),this[_0x1497('0x1a')](_0x4b049d,_0x3692a2)):_0x5de7f3['activeView']===_0x5c9ffc[_0x1497('0x2d')]?this[_0x1497('0x3')](_0x3692a2,_0x4b049d):this[_0x1497('0x1a')](_0x4b049d,_0x3692a2);},0xa,{'leading':!0x1}));const _0x7fe914=this[_0x1497('0x0')](_0x4b049d);if(_0x7fe914)this['_alignAfterItem'](_0x7fe914,_0x4b049d)||this[_0x1497('0x10')](_0x4b049d);else this['_alignToTargetRect'](_0x4b049d);return this[_0x1497('0x3d')](),_0x4b049d;}[_0x1497('0x29')](_0x3b13ba){return this[_0x1497('0x21')][_0x1497('0x38')](_0x3b13ba);}[_0x1497('0x1b')](){this[_0x1497('0x11')]['destroy']();}[_0x1497('0x37')](_0x1b6af9){const _0x2e9b78=this[_0x1497('0x29')](_0x1b6af9);this[_0x1497('0x1d')](_0x2e9b78),this['stopListening'](_0x1b6af9),_0x2e9b78[_0x1497('0x1b')](),this['_annotationViewToSidebarItemView'][_0x1497('0x18')](_0x1b6af9),this[_0x1497('0x3b')][_0x1497('0x18')](_0x2e9b78);}['_createSidebarView'](){const _0x688463=new _0x59318a(this[_0x1497('0x31')][_0x1497('0x46')]);return _0x688463[_0x1497('0x14')](),this['on'](_0x1497('0x41'),(_0x2a1f7c,_0x117040,_0x3b7d3d,_0x10ad95)=>{_0x10ad95&&_0x688463['unbind'](_0x1497('0x2b')),_0x3b7d3d?_0x688463[_0x1497('0x2f')](_0x1497('0x2b'))['to'](_0x3b7d3d,_0x1497('0x28')):_0x688463[_0x1497('0x2b')]=null;}),_0x688463;}[_0x1497('0x3d')](){this[_0x1497('0x2c')]=this[_0x1497('0x29')](this['_annotations'][_0x1497('0x22')][_0x1497('0x32')]);}['_getItemBefore'](_0x4f39d7){const _0xcde324=this[_0x1497('0x39')][_0x1497('0x22')],_0x6aa7f5=this[_0x1497('0x3b')][_0x1497('0x38')](_0x4f39d7),_0x355fdb=_0xcde324[_0x1497('0x38')](_0xcde324[_0x1497('0x40')](_0x6aa7f5)-0x1);return this[_0x1497('0x29')](_0x355fdb);}[_0x1497('0x2')](_0x100401){const _0x13a487=this[_0x1497('0x39')][_0x1497('0x22')],_0x587fae=this['_sidebarItemViewToAnnotationView']['get'](_0x100401),_0x14b6d4=_0x13a487[_0x1497('0x38')](_0x13a487['getIndex'](_0x587fae)+0x1);return this[_0x1497('0x29')](_0x14b6d4);}['_alignBeforeItem'](_0x38fa79,_0x126506){_0x38fa79[_0x1497('0xf')]();const _0x3b0541=O(_0x126506[_0x1497('0x28')]+this[_0x1497('0x24')],_0x38fa79[_0x1497('0x1')]);return!!_0x3b0541&&(this[_0x1497('0xa')](_0x126506,_0x126506[_0x1497('0x1')]-_0x3b0541),!0x0);}[_0x1497('0x1a')](_0x4b5cb8,_0x1607b9){_0x4b5cb8['updateHeight']();const _0x5c3d13=O(_0x4b5cb8[_0x1497('0x28')]+this[_0x1497('0x24')],_0x1607b9[_0x1497('0x1')]);return!!_0x5c3d13&&(this[_0x1497('0xa')](_0x1607b9,_0x1607b9['top']+_0x5c3d13,!0x1),!0x0);}[_0x1497('0x10')](_0x3760d4){const _0x3e16dc=this[_0x1497('0x31')][_0x1497('0x34')][_0x1497('0x38')](_0x579493),_0x174e12=this['_sidebarItemViewToAnnotationView']['get'](_0x3760d4);_0x3e16dc[_0x1497('0x36')](_0x174e12);const _0x3ac682=this[_0x1497('0xd')](_0x3760d4);this[_0x1497('0xa')](_0x3760d4,_0x3ac682);}['_getTargetTop'](_0x271dad){const _0x17090c=this[_0x1497('0x31')][_0x1497('0x34')][_0x1497('0x38')](_0x579493),_0x57737f=this['_sidebarItemViewToAnnotationView'][_0x1497('0x38')](_0x271dad),_0x5891f3=_0x17090c[_0x1497('0x30')](_0x57737f[_0x1497('0x2d')]),_0x5194f2=_0x57737f['targetRect'];if(_0x5891f3 instanceof _0x16ce0b)return _0x5194f2[_0x1497('0x1')];{const {top:_0xf1cf42}=new _0x16ce0b(this[_0x1497('0x11')][_0x1497('0x2a')]);return _0x5194f2[_0x1497('0x1')]-_0xf1cf42;}}[_0x1497('0xa')](_0x41a96a,_0x1eceb1,_0x445dbe=this[_0x1497('0x31')]['config']['get']('sidebar.preventScrollOutOfView')){_0x445dbe&&(_0x1eceb1=Math[_0x1497('0x7')](_0x1eceb1,this[_0x1497('0x4')](_0x41a96a))),_0x41a96a['top']=_0x1eceb1;}['_getMaxAvailableTop'](_0x2450dc){let _0x4f06e9=this[_0x1497('0x0')](_0x2450dc),_0x1ad7a1=0x0;for(;_0x4f06e9;)_0x4f06e9['updateHeight'](),_0x1ad7a1+=this[_0x1497('0x24')]+_0x4f06e9[_0x1497('0x19')],_0x4f06e9=this[_0x1497('0x0')](_0x4f06e9);return _0x1ad7a1;}}function O(_0x3bea67,_0x56d005){return Math[_0x1497('0x7')](_0x3bea67-_0x56d005,0x0);}