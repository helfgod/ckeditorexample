/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x27e8=['hasDomSelection','containsRange','requires','has','document','keys','EditorAnnotations','addSourceCollector','activeView','plugins','set','model','function','_editorAnnotationsData','stop','remove','isReadOnly','from','init','change:range','customView','editor','editing','items','_dataCollectors','get','element','add','listenTo','map','sort','_findSelectedViews','view','focusTracker','cancel','refreshSelectedViews','change:isFocused','Annotations','refresh','getRanges','update','selectedViews'];(function(_0x3735db,_0x27e8c6){const _0x39f3b3=function(_0x3d26fe){while(--_0x3d26fe){_0x3735db['push'](_0x3735db['shift']());}};_0x39f3b3(++_0x27e8c6);}(_0x27e8,0x14c));const _0x39f3=function(_0x3735db,_0x27e8c6){_0x3735db=_0x3735db-0x0;let _0x39f3b3=_0x27e8[_0x3735db];return _0x39f3b3;};import _0x449396 from'@ckeditor/ckeditor5-core/src/plugin';import _0x3b4737 from'./annotations';import _0x1616ac from'./inlineannotations';import _0x486b87 from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import{debounce as _0x293a7d}from'lodash-es';export default class y extends _0x449396{static get[_0x39f3('0x6')](){return[_0x3b4737,_0x1616ac];}static get['pluginName'](){return _0x39f3('0xa');}constructor(_0x2351ee){super(_0x2351ee),this[_0x39f3('0x1c')]=new Set();}[_0x39f3('0x16')](){const _0x2ba03c=this[_0x39f3('0x19')],_0x421f97=_0x2ba03c['plugins'][_0x39f3('0x1d')]('Annotations'),_0x22c1f4=_0x2ba03c[_0x39f3('0xf')][_0x39f3('0x8')]['selection'],_0x2a77ed=_0x293a7d(()=>this['refreshSelectedViews'](),0xa);_0x22c1f4['on'](_0x39f3('0x17'),(_0x106187,_0x397c44)=>{_0x397c44['directChange']&&(_0x2a77ed[_0x39f3('0x26')](),this[_0x39f3('0x27')]());}),this[_0x39f3('0x20')](_0x2ba03c[_0x39f3('0x1a')]['view'][_0x39f3('0x8')],_0x39f3('0x28'),(_0x4d9dce,_0x5bc631,_0x1f6b6e)=>{_0x1f6b6e&&_0x2a77ed();}),this[_0x39f3('0x20')](_0x2ba03c['ui'][_0x39f3('0x25')],_0x39f3('0x28'),(_0xebfd29,_0x36e418,_0x3f3c6f)=>{_0x3f3c6f||_0x2ba03c[_0x39f3('0x14')]||this['_editorAnnotationsData'][_0x39f3('0x7')](_0x421f97[_0x39f3('0xc')])&&(_0x421f97[_0x39f3('0xc')]=null);}),_0x421f97[_0x39f3('0x25')]['on'](_0x39f3('0x28'),(_0x3faf16,_0x32d809,_0x1f1cb2)=>{!_0x1f1cb2&&_0x2ba03c[_0x39f3('0x1a')][_0x39f3('0x24')][_0x39f3('0x4')]&&(_0x2a77ed[_0x39f3('0x26')](),this[_0x39f3('0x27')](),_0x3faf16[_0x39f3('0x12')]());},{'priority':'high'}),this[_0x39f3('0x20')](this[_0x39f3('0x19')]['ui'],_0x39f3('0x2'),()=>_0x421f97[_0x39f3('0x0')]());const _0xc7ce0c=new Set();this[_0x39f3('0x20')](_0x421f97[_0x39f3('0x1b')],_0x39f3('0x1f'),(_0x4b266c,_0x3bae8a)=>{for(const _0x43439d of this[_0x39f3('0x11')][_0x39f3('0x9')]())if(_0x43439d===_0x3bae8a[_0x39f3('0x18')]){_0x2ba03c['ui']['focusTracker'][_0x39f3('0x1f')](_0x3bae8a[_0x39f3('0x1e')]),_0xc7ce0c[_0x39f3('0x1f')](_0x3bae8a);break;}}),this[_0x39f3('0x20')](_0x421f97[_0x39f3('0x1b')],_0x39f3('0x13'),(_0x5611be,_0xaa9176)=>{_0xc7ce0c[_0x39f3('0x7')](_0xaa9176)&&(_0x2ba03c['ui']['focusTracker'][_0x39f3('0x13')](_0xaa9176[_0x39f3('0x1e')]),_0xc7ce0c['delete'](_0xaa9176));});}[_0x39f3('0xb')](_0x32da54){if(_0x39f3('0x10')!=typeof _0x32da54)throw new _0x486b87('editorannotations-invalid-source-callback');this[_0x39f3('0x1c')]['add'](_0x32da54);}[_0x39f3('0x27')](){const _0x29e30b=this[_0x39f3('0x19')][_0x39f3('0xd')]['get'](_0x39f3('0x29'));_0x29e30b[_0x39f3('0x3')]=this[_0x39f3('0x23')](),_0x29e30b[_0x39f3('0xc')]=_0x29e30b[_0x39f3('0x3')][0x0]||null;}get[_0x39f3('0x11')](){const _0x49e4a5=new Map();for(const _0x3e11de of Array[_0x39f3('0x15')](this['_dataCollectors']))for(const [_0xe04009,_0x2199e6]of _0x3e11de())_0x49e4a5[_0x39f3('0xe')](_0xe04009,_0x2199e6);return _0x49e4a5;}['_findSelectedViews'](){const _0x56e95d=[],_0x3115b2=this[_0x39f3('0x19')][_0x39f3('0xf')]['document']['selection'],_0x418e9c=Array['from'](_0x3115b2[_0x39f3('0x1')]()),_0x2cfc2a=this[_0x39f3('0x19')]['plugins'][_0x39f3('0x1d')](_0x39f3('0x29'));for(const [_0x328591,_0x18581f]of this[_0x39f3('0x11')]){const _0x1ac646=_0x1f4727(_0x18581f);_0x1ac646&&_0x56e95d['push']([_0x328591,_0x1ac646]);}function _0x1f4727(_0x38789c){for(const _0x27d246 of _0x38789c)for(const _0x15f158 of _0x418e9c)if(_0x27d246['containsRange'](_0x15f158,!_0x3115b2['isCollapsed']))return _0x27d246;return null;}return _0x56e95d[_0x39f3('0x22')]((_0x170399,_0x272b79)=>{const _0x5c0106=_0x170399[0x1],_0x30bdab=_0x272b79[0x1];return _0x5c0106[_0x39f3('0x5')](_0x30bdab)?0x1:_0x30bdab[_0x39f3('0x5')](_0x5c0106)||_0x170399[0x0]==_0x2cfc2a[_0x39f3('0xc')]?-0x1:_0x272b79[0x0]==_0x2cfc2a[_0x39f3('0xc')]?0x1:0x0;})[_0x39f3('0x21')](_0x2d1586=>_0x2d1586[0x0]);}}