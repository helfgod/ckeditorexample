/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5612=['change:height','Annotations','NarrowSidebar','isAnimationDisabled','remove','first','get','set','add','locale','isVisible','bind','_updateBalloonPosition','_hideBalloon','narrowsidebar-detach-not-attached','delete','register','activeView','init','plugins','element','content','has','listenTo','stopPropagation','keyCode','items','attachToDom','_manuallyClosed','unpin','context','detachFromDom','detach','change:selectedViews','from','bindTo','getAnnotationView','_attachToContainer','focus','off','getSidebarItemView','list','balloonPanelView','Esc','customView','target','change:activeView','high','pin','set:container','contains','using','stopListening','_detachFromContainer','isAttached','narrowSidebar','requires','type','_detachListeners','southArrowNorthEast','northArrowSouth','change:container','esc','_attachListeners','mousedown','number','_showBalloon','clear','bodyCollection','Sidebar','create','destroy','attach','northArrowSouthWest','view','_annotationViewToNarrowView','_domEmitter'];(function(_0x1a9bdc,_0x561202){const _0xa88965=function(_0x2ce9bb){while(--_0x2ce9bb){_0x1a9bdc['push'](_0x1a9bdc['shift']());}};_0xa88965(++_0x561202);}(_0x5612,0x6a));const _0xa889=function(_0x1a9bdc,_0x561202){_0x1a9bdc=_0x1a9bdc-0x0;let _0xa88965=_0x5612[_0x1a9bdc];return _0xa88965;};import _0x3dfc50 from'@ckeditor/ckeditor5-core/src/contextplugin';import _0x4a1180 from'./annotations';import _0x44a462 from'./sidebar';import _0x340651 from'./view/annotationcounterbuttonview';import _0x332c84 from'@ckeditor/ckeditor5-ui/src/panel/balloon/balloonpanelview';import _0x596fcc from'@ckeditor/ckeditor5-ui/src/editorui/bodycollection';import _0x12c76e from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import _0x585544 from'@ckeditor/ckeditor5-utils/src/dom/emittermixin';import{keyCodes as _0x1db683}from'@ckeditor/ckeditor5-utils/src/keyboard';import'../../theme/sidebar-narrow.css';export default class s extends _0x3dfc50{static get[_0xa889('0x1b')](){return[_0x44a462,_0x4a1180];}static get['pluginName'](){return _0xa889('0x32');}constructor(_0x2a1d0b){super(_0x2a1d0b),this[_0xa889('0x19')]=!0x1,this[_0xa889('0x4c')]=new Set(),this[_0xa889('0x2f')]=Object[_0xa889('0x29')](_0x585544),this[_0xa889('0x2e')]=new Map();}[_0xa889('0x42')](){this[_0xa889('0x1')][_0xa889('0x43')]['get'](_0xa889('0x31'))[_0xa889('0x40')](_0xa889('0x1a'),this),this[_0xa889('0x27')]=new _0x596fcc(this[_0xa889('0x1')][_0xa889('0x39')]),this[_0xa889('0x27')][_0xa889('0x4b')](),this[_0xa889('0xd')]=new _0x332c84(this[_0xa889('0x1')][_0xa889('0x39')]),this[_0xa889('0x27')][_0xa889('0x38')](this[_0xa889('0xd')]);}[_0xa889('0x2b')](){const _0x15680c=this[_0xa889('0x1')][_0xa889('0x43')][_0xa889('0x36')](_0xa889('0x28')),_0x287216=this[_0xa889('0x1')]['plugins'][_0xa889('0x36')](_0xa889('0x31')),_0x1bbb6f=this[_0xa889('0xd')];if(this[_0xa889('0x19')])throw new _0x12c76e('narrowsidebar-attach-already-attached',this);this[_0xa889('0x19')]=!0x0,this[_0xa889('0x47')](_0x15680c,_0xa889('0x14'),()=>{this[_0xa889('0x3')](),this[_0xa889('0x47')](_0x15680c,_0xa889('0x20'),_0x1a00d1=>{_0x1a00d1[_0xa889('0xa')](),this['attach']();});}),_0x15680c[_0xa889('0x8')]({'viewClass':'ck-sidebar--narrow','spaceBetweenItems':0x5}),_0x15680c[_0xa889('0x2d')][_0xa889('0xc')][_0xa889('0x6')](_0x287216[_0xa889('0x4a')])[_0xa889('0x16')](_0x1b2b8e=>{const _0x2cadbd=new _0x340651(this[_0xa889('0x1')][_0xa889('0x39')]),_0x24d944=_0x15680c['addView'](_0x1b2b8e,_0x2cadbd);return this[_0xa889('0x2e')][_0xa889('0x37')](_0x1b2b8e,_0x2cadbd),_0x2cadbd[_0xa889('0x3b')]('isDirty','annotationType',_0xa889('0x24'))['to'](_0x1b2b8e,'isDirty',_0xa889('0x1c'),'length'),_0x2cadbd['on']('execute',()=>{this[_0xa889('0x4c')][_0xa889('0x26')](),_0x1bbb6f[_0xa889('0x45')][_0xa889('0x35')]!==_0x1b2b8e?(this[_0xa889('0x25')](_0x1b2b8e),_0x1b2b8e[_0xa889('0x44')][_0xa889('0x9')](),_0x287216[_0xa889('0x41')]=_0x1b2b8e[_0xa889('0xf')]):this[_0xa889('0x3d')]();}),_0x24d944;}),this[_0xa889('0x47')](_0x287216[_0xa889('0x4a')],_0xa889('0x34'),(_0x2f29ba,_0x40f683)=>{this[_0xa889('0x2e')][_0xa889('0x36')](_0x40f683)['destroy'](),this[_0xa889('0x2e')][_0xa889('0x3f')](_0x40f683);}),this[_0xa889('0x47')](_0x287216,_0xa889('0x11'),(_0x2ff737,_0x27f827,_0xe5cfa2,_0x17c756)=>{if(_0x17c756){const _0x1f50e1=_0x287216[_0xa889('0x7')](_0x17c756);if(!_0x1f50e1)return;_0x15680c[_0xa889('0xb')](_0x1f50e1)['isAnimationDisabled']=!0x1;}if(_0xe5cfa2){const _0x2ee39c=_0x287216[_0xa889('0x7')](_0xe5cfa2);_0x15680c[_0xa889('0xb')](_0x2ee39c)[_0xa889('0x33')]=!0x0;}},{'priority':_0xa889('0x12')}),this[_0xa889('0x47')](_0x287216,_0xa889('0x11'),(_0x24add0,_0x4fb324,_0x557cee)=>{const _0x313c86=_0x287216['getAnnotationView'](_0x557cee),_0x18afbb=_0x15680c[_0xa889('0xb')](_0x313c86);_0x557cee&&_0x18afbb?this[_0xa889('0x25')](_0x313c86):this[_0xa889('0x3d')]();}),this['listenTo'](_0x287216,_0xa889('0x4'),(_0xd57ada,_0xba9550,_0x103eaa,_0x34e0bc)=>{for(const _0xe14574 of _0x34e0bc)_0x103eaa['includes'](_0xe14574)||this[_0xa889('0x4c')][_0xa889('0x3f')](_0x287216[_0xa889('0x7')](_0xe14574));}),this[_0xa889('0x47')](_0x287216,'refresh',()=>{_0x1bbb6f['isVisible']&&this['_updateBalloonPosition']();}),this[_0xa889('0x2f')]['listenTo'](document,'keydown',(_0x208c22,_0x26d0b4)=>{_0x26d0b4[_0xa889('0x49')]===_0x1db683[_0xa889('0x21')]&&_0x1bbb6f['isVisible']&&(this[_0xa889('0x4c')][_0xa889('0x38')](_0x1bbb6f[_0xa889('0x45')][_0xa889('0x35')]),this[_0xa889('0x3d')](),_0x26d0b4[_0xa889('0x48')](),_0x26d0b4['preventDefault']());}),this[_0xa889('0x2f')][_0xa889('0x47')](document,_0xa889('0x23'),(_0x563e75,_0x2c43ed)=>{const _0x549069=_0x2c43ed[_0xa889('0x10')];_0x1bbb6f[_0xa889('0x3a')]&&_0x1bbb6f[_0xa889('0x44')][_0xa889('0x15')](_0x549069)||_0x15680c['view'][_0xa889('0x44')][_0xa889('0x15')](_0x549069)||(this[_0xa889('0x4c')][_0xa889('0x26')](),this[_0xa889('0x3d')]());});}['detach'](){if(!this[_0xa889('0x19')])throw new _0x12c76e(_0xa889('0x3e'),this);const _0x57b59d=this[_0xa889('0x1')][_0xa889('0x43')][_0xa889('0x36')]('Sidebar');this[_0xa889('0x3d')](),Array[_0xa889('0x5')](this['_annotationViewToNarrowView']['values'](),_0x42613e=>_0x42613e['destroy']()),this[_0xa889('0x2e')][_0xa889('0x26')](),_0x57b59d[_0xa889('0x18')](),this[_0xa889('0x17')](),this[_0xa889('0x2f')]['stopListening'](),this['isAttached']=!0x1;}[_0xa889('0x2a')](){this[_0xa889('0x19')]&&this['detach'](),this[_0xa889('0x27')][_0xa889('0x2')]();}[_0xa889('0x25')](_0x45d7e2){if(this[_0xa889('0x4c')]['has'](_0x45d7e2))return;const _0x1bb3e6=this[_0xa889('0xd')][_0xa889('0x45')][_0xa889('0x35')];_0x1bb3e6!==_0x45d7e2?(_0x1bb3e6&&this[_0xa889('0x1d')](_0x1bb3e6),this[_0xa889('0x22')](_0x45d7e2),this[_0xa889('0xd')]['content'][_0xa889('0x26')](),this['balloonPanelView'][_0xa889('0x45')][_0xa889('0x38')](_0x45d7e2),this[_0xa889('0x3c')]()):this[_0xa889('0x3c')]();}[_0xa889('0x3c')](){const _0xbb0647=this[_0xa889('0xd')][_0xa889('0x45')]['first'];if(!this[_0xa889('0x2e')][_0xa889('0x46')](_0xbb0647))return;const _0x1e976c=this[_0xa889('0x2e')]['get'](_0xbb0647)[_0xa889('0x44')],_0x417bf8=function(){const _0xaf3f=_0x332c84['defaultPositions'];return[_0xaf3f[_0xa889('0x1e')],_0xaf3f['northArrowSouthEast'],_0xaf3f['southArrowNorth'],_0xaf3f[_0xa889('0x1f')],_0xaf3f['southArrowNorthWest'],_0xaf3f[_0xa889('0x2c')]];}();this[_0xa889('0xd')][_0xa889('0x13')]({'target':_0x1e976c,'positions':_0x417bf8});}[_0xa889('0x3d')](){const _0x837f82=this[_0xa889('0xd')],_0x3e5454=_0x837f82[_0xa889('0x45')]['first'];_0x3e5454&&(this[_0xa889('0x1d')](_0x3e5454),_0x837f82[_0xa889('0x0')](),_0x837f82[_0xa889('0x45')][_0xa889('0x26')]());}[_0xa889('0x22')](_0x5c91bd){this[_0xa889('0x47')](_0x5c91bd,_0xa889('0x30'),()=>this[_0xa889('0x3c')]()),this[_0xa889('0x47')](_0x5c91bd,_0xa889('0xe'),(_0x593194,_0x4fc273)=>{this[_0xa889('0x4c')][_0xa889('0x38')](_0x5c91bd),this[_0xa889('0x3d')](),_0x4fc273();});}['_detachListeners'](_0x430264){this[_0xa889('0x17')](_0x430264);}}