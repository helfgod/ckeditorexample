/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x5be759 from'@ckeditor/ckeditor5-ui/src/view';import gt from'@ckeditor/ckeditor5-ui/src/viewcollection';import ut from'../commenteditor/commenteditor';import _0x1ca537 from'@ckeditor/ckeditor5-ui/src/button/buttonview';import _0x2b296c from'@ckeditor/ckeditor5-utils/src/focustracker';import Bt from'@ckeditor/ckeditor5-ui/src/focuscycler';import _0x597895 from'@ckeditor/ckeditor5-utils/src/keystrokehandler';import Ot from'@ckeditor/ckeditor5-core/theme/icons/check.svg';import St from'@ckeditor/ckeditor5-core/theme/icons/cancel.svg';export default class Mt extends _0x5be759{constructor(_0x3ba593,_0x1ad749={}){super(_0x3ba593);const {t:t}=_0x3ba593;this['editor']=new ut(_0x1ad749),this['keystrokes']=new _0x597895(),this['focusTracker']=new _0x2b296c(),this['set']('value',_0x1ad749['initialData']||''),this['set']('disabledSubmit',!0x1),this['set']('showButtons',!0x0),this['set']('placeholder',t('Reply...')),this['submitButtonView']=this['_createSubmitButton'](),this['cancelButtonView']=this['_createCancelButton'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck-comment__input-wrapper']},'children':[{'tag':'div','attributes':{'class':['ck-comment__input-actions',this['bindTemplate']['if']('showButtons','ck-comment__input-actions--active')]},'children':[this['submitButtonView'],this['cancelButtonView']]}]}),this['keystrokes']['set']('Esc',(_0x46fd44,_0x5a051e)=>{this['cancelButtonView']['fire']('execute'),_0x5a051e();}),this['on']('submit',(_0x337d4f,_0x462881)=>{_0x462881['length']>0xfa0?(alert(t({'string':'Comment\x20content\x20is\x20too\x20long.\x20Your\x20comment\x20has\x20%0\x20characters\x20but\x20the\x20limit\x20is\x20%1\x20characters.','id':'TOO_LONG_COMMENT_ALERT'},[_0x462881['length'],0xfa0])),_0x337d4f['stop']()):this['editor']['setData']('');},{'priority':'high'});}['render'](){super['render']();const {editor:_0x1fa377,element:_0x96d57d}=this;this['keystrokes']['listenTo'](_0x96d57d),this['focusTracker']['add'](_0x96d57d),this['_editorCreationPromise']=_0x1fa377['create']()['then'](()=>{_0x96d57d['insertBefore'](_0x1fa377['ui']['element'],_0x96d57d['firstChild']),_0x1fa377['model']['document']['on']('change',()=>this['value']=_0x1fa377['getData']()),_0x1fa377['bind']('placeholder')['to'](this),this['_initializeFocusCycling'](_0x1fa377),this['fire']('editorReady');});}['focus'](){this['editor']['focus']();}async['destroy'](){this['_isDestroyed']||(this['_isDestroyed']=!0x0,this['isRendered']&&(await this['_editorCreationPromise'],await this['editor']['destroy']()),await super['destroy']());}['_createSubmitButton'](){const _0x5b2b2e=new _0x1ca537(this['locale']),{t:t}=this['locale'];return _0x5b2b2e['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--submit']}}),_0x5b2b2e['label']=t('Submit'),_0x5b2b2e['icon']=Ot,_0x5b2b2e['on']('execute',()=>{this['fire']('submit',this['value']);}),_0x5b2b2e['bind']('isEnabled')['to'](this,'value',this,'disabledSubmit',(_0x12cb64,_0x166cad)=>!_0x166cad&&!!_0x12cb64['trim']()),_0x5b2b2e;}['_createCancelButton'](){const _0x1dbc01=new _0x1ca537(this['locale']),{t:t}=this['locale'];return _0x1dbc01['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--cancel']}}),_0x1dbc01['label']=t('Cancel'),_0x1dbc01['icon']=St,_0x1dbc01['on']('execute',()=>{this['editor']['setData'](''),this['fire']('cancel');}),_0x1dbc01;}['_initializeFocusCycling'](_0x119149){const _0x593aa7=this['focusTracker'],_0x2b18c2=new gt();[_0x119149['ui']['view'],this['submitButtonView'],this['cancelButtonView']]['forEach'](_0x487287=>{_0x2b18c2['add'](_0x487287),_0x593aa7['add'](_0x487287['element']);});const _0x4318b0=new Bt({'focusables':_0x2b18c2,'focusTracker':_0x593aa7});this['keystrokes']['set']('tab',(_0x297ec3,_0x18f7d9)=>{_0x4318b0['focusNext'](),_0x18f7d9();},{'priority':'low'}),this['keystrokes']['set']('shift\x20+\x20tab',(_0x2f08ac,_0x2d30cd)=>{_0x4318b0['focusPrevious'](),_0x2d30cd();},{'priority':'low'});}}