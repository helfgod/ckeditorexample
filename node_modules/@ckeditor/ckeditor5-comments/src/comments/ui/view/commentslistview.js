/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x208f=['from','commentViews','updateComment','add','isActive','get','destroy','CommentView','setTemplate','count','listenTo','commentUpdated','comments','_config','some','_collapsedCommentsView','length','maxCommentsWhenCollapsed','_model','refreshVisibleViews','_shouldCollapse','_rearrangeCollapse','collapse','delete','locale','remove','ck-thread__comments','isEditMode','insert','_rearrangeExpand','maxThreadTotalWeight','weight','set','delegate','createCollection','_handleRemoveCommentModel','expand','render','_updateHasDirtyComment','editorConfig','removeComment','_handleNewCommentModel','visibleViews','focus','hasDirtyComment'];(function(_0x5e5b2d,_0x208ff8){const _0x5d006c=function(_0x492740){while(--_0x492740){_0x5e5b2d['push'](_0x5e5b2d['shift']());}};_0x5d006c(++_0x208ff8);}(_0x208f,0x1f0));const _0x5d00=function(_0x5e5b2d,_0x208ff8){_0x5e5b2d=_0x5e5b2d-0x0;let _0x5d006c=_0x208f[_0x5e5b2d];return _0x5d006c;};import _0x16554e from'@ckeditor/ckeditor5-ui/src/view';import _0x12427a from'@ckeditor/ckeditor5-utils/src/diff';import _0x2890a9 from'./collapsedcommentsview';import _0x56e19f from'@ckeditor/ckeditor5-utils/src/collection';export default class Ct extends _0x16554e{constructor(_0xd28a13,_0x1113d7,_0x327e88){super(_0xd28a13),this[_0x5d00('0x1f')](_0x5d00('0x2b'),!0x1),this[_0x5d00('0x1f')](_0x5d00('0xf'),_0x1113d7['comments'][_0x5d00('0xf')]),this[_0x5d00('0x1f')]('isActive',!0x1),this[_0x5d00('0x11')]=_0x1113d7,this[_0x5d00('0xc')]=_0x327e88,this[_0x5d00('0x0')]=this[_0x5d00('0x21')](),this['visibleViews']=this['createCollection'](),this[_0x5d00('0xe')]=new _0x2890a9(_0xd28a13),this[_0x5d00('0xe')]['bind'](_0x5d00('0x8'))['to'](this,_0x5d00('0xf'),_0x20add2=>_0x20add2-this['_config'][_0x5d00('0x10')]);for(const _0x4dc079 of _0x1113d7['comments'])this[_0x5d00('0x28')](_0x4dc079);this[_0x5d00('0x9')](_0x1113d7[_0x5d00('0xb')],_0x5d00('0x2'),(_0x29ae4c,_0x4796b9)=>{this['length']++,this[_0x5d00('0x28')](_0x4796b9),this[_0x5d00('0x12')]();}),this['listenTo'](_0x1113d7[_0x5d00('0xb')],'remove',(_0x429a27,_0xf29d77)=>{this[_0x5d00('0xf')]--,this[_0x5d00('0x22')](_0xf29d77),this['refreshVisibleViews']();}),this[_0x5d00('0x9')](_0x1113d7,_0x5d00('0xa'),()=>this[_0x5d00('0x12')]()),this['on']('change:isActive',()=>this[_0x5d00('0x12')]()),this['on']('change:hasDirtyComment',()=>this[_0x5d00('0x12')]()),this[_0x5d00('0x7')]({'tag':'ul','attributes':{'class':[_0x5d00('0x19')]},'children':this[_0x5d00('0x29')]});}get[_0x5d00('0x13')](){return this[_0x5d00('0x11')][_0x5d00('0x1e')]>this[_0x5d00('0xc')][_0x5d00('0x1d')]&&!this[_0x5d00('0x3')]&&!this[_0x5d00('0x2b')];}['render'](){super[_0x5d00('0x24')](),this['refreshVisibleViews']();}[_0x5d00('0x2a')](){this['element'][_0x5d00('0x2a')]();}[_0x5d00('0x5')](){this[_0x5d00('0xe')][_0x5d00('0x5')]();for(const _0x258cf7 of this[_0x5d00('0x0')])_0x258cf7[_0x5d00('0x5')]();super[_0x5d00('0x5')]();}[_0x5d00('0x12')](){this[_0x5d00('0x13')]?this[_0x5d00('0x14')]():this['_rearrangeExpand']();}[_0x5d00('0x28')](_0x1b7237){const _0x229e20=new this[(_0x5d00('0xc'))][(_0x5d00('0x6'))](this[_0x5d00('0x17')],_0x1b7237,{'maxCommentCharsWhenCollapsed':this[_0x5d00('0xc')]['maxCommentCharsWhenCollapsed'],'formatDateTime':this[_0x5d00('0xc')]['formatDateTime'],'editorConfig':this[_0x5d00('0xc')][_0x5d00('0x26')]});_0x229e20['viewUid']=_0x1b7237['id'],_0x229e20[_0x5d00('0x20')](_0x5d00('0x27'))['to'](this),_0x229e20[_0x5d00('0x20')](_0x5d00('0x1'))['to'](this),this[_0x5d00('0x9')](_0x229e20,'change:isEditMode',()=>this['_updateHasDirtyComment']()),this[_0x5d00('0x0')][_0x5d00('0x2')](_0x229e20);}['_handleRemoveCommentModel'](_0x28dca0){const _0x5c48e9=this[_0x5d00('0x0')]['remove'](_0x28dca0['id']);this['stopListening'](_0x5c48e9),_0x5c48e9[_0x5d00('0x1a')]&&this[_0x5d00('0x25')](),_0x5c48e9['destroy']();}[_0x5d00('0x25')](){this[_0x5d00('0x2b')]=Array[_0x5d00('0x2c')](this[_0x5d00('0x0')])[_0x5d00('0xd')](_0x14b19d=>_0x14b19d[_0x5d00('0x1a')]);}['_rearrangeCollapse'](){const _0x2d0280=function(_0x3c4522){const _0x1381cb=new _0x56e19f();for(const _0x505661 of _0x3c4522)_0x1381cb['add'](_0x505661);return _0x1381cb;}(this['commentViews']),_0x340821=this[_0x5d00('0xe')][_0x5d00('0x8')];for(let _0x578190=0x1;_0x578190<=_0x340821;_0x578190++)_0x2d0280[_0x5d00('0x18')](0x1);for(const _0x145037 of _0x2d0280)_0x145037[_0x5d00('0x15')]();_0x340821>0x0&&_0x2d0280[_0x5d00('0x2')](this[_0x5d00('0xe')],0x1),Dt(_0x12427a(Array['from'](this[_0x5d00('0x29')]),Array[_0x5d00('0x2c')](_0x2d0280)),this[_0x5d00('0x29')],_0x2d0280);}[_0x5d00('0x1c')](){Dt(_0x12427a(Array[_0x5d00('0x2c')](this['visibleViews']),Array[_0x5d00('0x2c')](this[_0x5d00('0x0')])),this['visibleViews'],this[_0x5d00('0x0')]);for(const _0x3b8b60 of this[_0x5d00('0x29')])_0x3b8b60[_0x5d00('0x23')]();}}function Dt(_0x4bbc80,_0x2fd6aa,_0x3acf2c){let _0x48ba03=0x0;for(const _0xdc4c9a of _0x4bbc80)switch(_0xdc4c9a){case _0x5d00('0x1b'):_0x2fd6aa[_0x5d00('0x2')](_0x3acf2c[_0x5d00('0x4')](_0x48ba03),_0x48ba03),_0x48ba03++;break;case _0x5d00('0x16'):_0x2fd6aa[_0x5d00('0x18')](_0x48ba03);break;case'equal':_0x48ba03++;}}